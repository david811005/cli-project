(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72fefc6c"],{"0b42":function(t,e,c){var n=c("da84"),a=c("e8b5"),o=c("68ee"),r=c("861d"),i=c("b622"),l=i("species"),s=n.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,o(e)&&(e===s||a(e.prototype))?e=void 0:r(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?s:e}},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},"6be2":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},a=n();e["a"]=a},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var r=n(e);r in t?a.f(t,r,o(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),r=c("e8b5"),i=c("861d"),l=c("7b0b"),s=c("07fa"),d=c("8418"),u=c("65f0"),b=c("1dde"),f=c("b622"),g=c("2d00"),j=f("isConcatSpreadable"),O=9007199254740991,p="Maximum allowed index exceeded",m=a.TypeError,h=g>=51||!o((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),v=b("concat"),y=function(t){if(!i(t))return!1;var e=t[j];return void 0!==e?!!e:r(t)},x=!h||!v;n({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,n,a,o,r=l(this),i=u(r,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?r:arguments[e],y(o)){if(a=s(o),b+a>O)throw m(p);for(c=0;c<a;c++,b++)c in o&&d(i,b,o[c])}else{if(b>=O)throw m(p);d(i,b++,o)}return i.length=b,i}})},b0c0:function(t,e,c){var n=c("83ab"),a=c("5e77").EXISTS,o=c("e330"),r=c("9bf2").f,i=Function.prototype,l=o(i.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(s.exec),u="name";n&&!a&&r(i,u,{configurable:!0,get:function(){try{return d(s,l(this))[1]}catch(t){return""}}})},b64b:function(t,e,c){var n=c("23e7"),a=c("7b0b"),o=c("df75"),r=c("d039"),i=r((function(){o(1)}));n({target:"Object",stat:!0,forced:i},{keys:function(t){return o(a(t))}})},cc55:function(t,e,c){"use strict";c.r(e);c("99af"),c("b0c0"),c("b64b");var n=c("7a23"),a={class:"container"},o=Object(n["g"])("h1",null,"購物車",-1),r={class:"table align-middle"},i=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"圖片"),Object(n["g"])("th",null,"商品名稱"),Object(n["g"])("th",null,"價格"),Object(n["g"])("th")])],-1),l={style:{width:"200px"}},s={key:0,class:"h5"},d={key:1},u={class:"h6"},b={class:"h5"},f={class:"btn-group btn-group-sm"},g=["onClick","disabled"],j={class:"spinner-border spinner-border-sm"},O=Object(n["i"])(" 查看更多 "),p=["onClick","disabled"],m={class:"spinner-border spinner-border-sm"},h=Object(n["i"])(" 加到購物車 "),v={class:"text-end"},y=["disabled"],x={class:"table align-middle"},k=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th"),Object(n["g"])("th",null,"品名"),Object(n["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["g"])("th",null,"單價")])],-1),C=["onClick","disabled"],w={class:"fas fa-spinner fa-pulse"},V=Object(n["i"])(" x "),L={class:"input-group input-group-sm"},J={class:"input-group mb-3"},q=["onUpdate:modelValue","onChange"],F=["value"],T={class:"input-group-text",id:"basic-addon2"},A={class:"text-end"},S=Object(n["g"])("small",{class:"text-success"},"折扣價：",-1),U=Object(n["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),$={class:"text-end"},D={class:"my-5 row justify-content-center"},_={class:"mb-3"},E=Object(n["g"])("label",{for:"email",class:"form-label"},"Email",-1),M={class:"mb-3"},G=Object(n["g"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),I={class:"mb-3"},P=Object(n["g"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),z={class:"mb-3"},B=Object(n["g"])("label",{for:"address",class:"form-label"},"收件人地址",-1),N={class:"mb-3"},X=Object(n["g"])("label",{for:"message",class:"form-label"},"留言",-1),H={class:"text-end"},K=["disabled"];function Q(t,e,c,Q,R,W){var Y=Object(n["G"])("Field"),Z=Object(n["G"])("ErrorMessage"),tt=Object(n["G"])("Form");return Object(n["y"])(),Object(n["f"])("section",null,[Object(n["g"])("div",a,[o,Object(n["g"])("table",r,[i,Object(n["g"])("tbody",null,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["F"])(R.products,(function(e){return Object(n["y"])(),Object(n["f"])("tr",{key:e.id},[Object(n["g"])("td",l,[Object(n["g"])("div",{style:Object(n["s"])([{backgroundImage:"url(".concat(e.imageUrl,")")},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),Object(n["g"])("td",null,Object(n["J"])(e.title),1),Object(n["g"])("td",null,[e.origin_price==e.price?(Object(n["y"])(),Object(n["f"])("div",s,Object(n["J"])(e.price)+" 元",1)):(Object(n["y"])(),Object(n["f"])("div",d,[Object(n["g"])("del",u,"原價 "+Object(n["J"])(e.origin_price)+" 元",1),Object(n["g"])("div",b,"現在只要 "+Object(n["J"])(e.price)+" 元",1)]))]),Object(n["g"])("td",null,[Object(n["g"])("div",f,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(c){return t.openProductModal(e.id)},disabled:R.isLoading==e.id},[Object(n["T"])(Object(n["g"])("i",j,null,512),[[n["O"],R.isLoading==e.id]]),O],8,g),Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return W.addToCart(e.id)},disabled:R.isLoading==e.id},[Object(n["T"])(Object(n["g"])("i",m,null,512),[[n["O"],R.isLoading==e.id]]),h],8,p)])])])})),128))])]),Object(n["g"])("div",v,[Object(n["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=function(){return W.delAll&&W.delAll.apply(W,arguments)}),disabled:0==R.cartData.carts.length},"清空購物車",8,y)]),Object(n["g"])("table",x,[k,Object(n["g"])("tbody",null,[R.cartData.carts?(Object(n["y"])(!0),Object(n["f"])(n["a"],{key:0},Object(n["F"])(R.cartData.carts,(function(t){return Object(n["y"])(),Object(n["f"])("tr",{key:t.id},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return W.delCart(t.id)},disabled:R.isLoading==t.id},[Object(n["T"])(Object(n["g"])("i",w,null,512),[[n["O"],R.isLoading==t.id]]),V],8,C)]),Object(n["g"])("td",null,Object(n["J"])(t.product.title),1),Object(n["g"])("td",null,[Object(n["g"])("div",L,[Object(n["g"])("div",J,[Object(n["T"])(Object(n["g"])("select",{id:"",class:"form-select","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return W.updateCart(t)}},[(Object(n["y"])(),Object(n["f"])(n["a"],null,Object(n["F"])(20,(function(e){return Object(n["g"])("option",{value:e,key:"".concat(e,"+").concat(t.id)},Object(n["J"])(e),9,F)})),64))],40,q),[[n["M"],t.qty]]),Object(n["g"])("span",T,Object(n["J"])(t.product.unit),1)])])]),Object(n["g"])("td",A,[S,Object(n["i"])(" "+Object(n["J"])(t.final_total),1)])])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[U,Object(n["g"])("td",$,Object(n["J"])(R.cartData.total),1)])])])]),Object(n["g"])("div",D,[Object(n["j"])(tt,{ref:"form",class:"col-md-6",onSubmit:W.postForm},{default:Object(n["S"])((function(t){var c=t.errors;return[Object(n["g"])("div",_,[E,Object(n["j"])(Y,{id:"email",name:"email",type:"email",class:Object(n["r"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:R.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=function(t){return R.form.user.email=t})},null,8,["class","modelValue"]),Object(n["j"])(Z,{name:"email",class:"invalid-feedback"})]),Object(n["g"])("div",M,[G,Object(n["j"])(Y,{id:"name",name:"姓名",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:R.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return R.form.user.name=t})},null,8,["class","modelValue"]),Object(n["j"])(Z,{name:"姓名",class:"invalid-feedback"})]),Object(n["g"])("div",I,[P,Object(n["j"])(Y,{id:"tel",name:"電話",type:"tel",class:Object(n["r"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:"required|min:8",modelValue:R.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return R.form.user.tel=t})},null,8,["class","modelValue"]),Object(n["j"])(Z,{name:"電話",class:"invalid-feedback"})]),Object(n["g"])("div",z,[B,Object(n["j"])(Y,{id:"address",name:"地址",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:R.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return R.form.user.address=t})},null,8,["class","modelValue"]),Object(n["j"])(Z,{name:"地址",class:"invalid-feedback"})]),Object(n["g"])("div",N,[X,Object(n["T"])(Object(n["g"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=function(t){return R.form.message=t})},null,512),[[n["N"],R.form.message]])]),Object(n["g"])("div",H,[Object(n["g"])("button",{type:"submit",class:"btn btn-danger",disabled:Object.keys(c).length>0||0===R.cartData.carts.length},"送出訂單",8,K)])]})),_:1},8,["onSubmit"])])])}var R=c("6be2"),W={data:function(){return{cartData:{carts:[]},products:[],productId:"",isLoading:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getPoducts:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/products/all")).then((function(e){t.products=e.data.products}))},addToCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={product_id:t,qty:c};this.isLoading=t,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/cart"),{data:n}).then((function(t){e.getCart(),console.log(t.data),R["a"].emit("get-cart"),e.isLoading=""}))},getCart:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/cart")).then((function(e){t.cartData=e.data.data}))},delCart:function(t){var e=this;this.isLoading=t,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/cart/").concat(t)).then((function(){e.getCart(),R["a"].emit("get-cart"),e.isLoading=""}))},updateCart:function(t){var e=this,c={product_id:t.product_id,qty:t.qty};this.isLoading=t.id,this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/cart/").concat(t.id),{data:c}).then((function(){e.getCart(),R["a"].emit("get-cart"),e.isLoading=""}))},delAll:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/carts")).then((function(){R["a"].emit("get-cart"),t.getCart()}))},postForm:function(){var t=this,e=this.form;console.log(e);var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("david19921005","/order");this.$http.post(c,{data:e}).then((function(){t.$refs.form.resetForm(),t.getCart()})).catch((function(t){alert(t.data.message)}))}},mounted:function(){this.getPoducts(),this.getCart()}},Y=c("6b0d"),Z=c.n(Y);const tt=Z()(W,[["render",Q]]);e["default"]=tt},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-72fefc6c.91b0cf25.js.map